# Application Configuration
quarkus.http.port=${APP_PORT:8080}
quarkus.redis.hosts=${REDIS_URL}
quarkus.rest-client.payment-processor-default.url=${PAYMENT_PROCESSOR_DEFAULT}
quarkus.rest-client.payment-processor-fallback.url=${PAYMENT_PROCESSOR_FALLBACK}
quarkus.rest-client.http2=true

# Database Configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${QUARKUS_DATASOURCE_USERNAME}
quarkus.datasource.password=${QUARKUS_DATASOURCE_PASSWORD}
quarkus.datasource.reactive.url=${QUARKUS_DATASOURCE_REACTIVE_URL}
payment.stream.batch-size = ${BATCH_SIZE:30}

# Virtual Threads and Worker Pool Optimization (CRITICAL FIX)
quarkus.vertx.prefer-native-transport=true
quarkus.vertx.max-worker-execute-time=20
quarkus.vertx.event-loops-pool-size=${EVENT_LOOPS_POOL_SIZE:4}
quarkus.thread-pool.core-threads=10
quarkus.thread-pool.max-threads=20

# Database Connection Pool (OPTIMIZED)
quarkus.datasource.reactive.max-size=20
quarkus.datasource.reactive.idle-timeout=PT10M
quarkus.datasource.reactive.max-lifetime=PT30M
quarkus.datasource.reactive.cache-prepared-statements=true
quarkus.datasource.reactive.shared=true
quarkus.datasource.reactive.reconnect-attempts=3
quarkus.datasource.reactive.reconnect-interval=PT2S

# Redis Connection Pool (FIXED)
quarkus.redis.max-pool-size=100
quarkus.redis.max-pool-waiting=600
quarkus.redis.reconnect-attempts=3
quarkus.redis.reconnect-interval=PT1S

# REST Client Configuration (OPTIMIZED FOR SPEED)
# Default Client - Primary endpoint
quarkus.rest-client.payment-processor-default.connect-timeout=500
quarkus.rest-client.payment-processor-default.read-timeout=2000
quarkus.rest-client.payment-processor-default.connection-pool-size=50
quarkus.rest-client.payment-processor-default.connection-ttl=30000
quarkus.rest-client.payment-processor-default.max-redirects=0


quarkus.log.console.level=DEBUG



